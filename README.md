# TelegramHabitTracker

## Технічне завдання і плани (тимчасово)

### Команди:

- старт/хелп

- [пізніше] зареєструвати профіль (покишо бот буде тільки для мене)

- створити звичку:
  - поле назви звички
  
  - час в який вона має тригеритись
  
  - регулярність (година/день/тиждень), вкрасти функціонал в Google Calendar
  
    ![image-20230126201522267](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20230126201522267.png)
  
    Поле 'Налаштувати' виглядає так:
  
    ![image-20230126201644332](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20230126201644332.png)
  
    Це ще прикольний варіант настройки (MeteoBot)
  
    ![image-20230126212021355](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20230126212021355.png)
  
    пропоную робити це так: 
  
    - перше повідомлення: згенеровано клавіатуру кожен день/тиждень/місяць/рік
    - друге: кожен 1й день, 2й день.. тобто потрібно ввести число
  
  - Задати алгоритм дій (якщо є), в такому форматі:
    - кожна команда задається окремим повідомленням, яке згодом парситься
    - формат повідомлення: перший рядок це назва дії, або сама дія, а через ентер вводиться пояснення (наприклад: Віджимання \n 10 разів). 
  
  ```
  Введіть назву звички:
  - Зарядка
  Введіть час звички:
  - 7:00 [тут ще може виникнути питання форматів]
  Введіть регулярність [тут може бути клавіатура з вибором]:
  - щодня
  Бажаєте додати алгоритм дій? [Так/Ні]
  - Так
  Додайте кроки. [весь цей час має висіти клавіатура з кнопкою завершити набір кроків, такожмає бути кнопка відміни, яка відкатить цю історію до питання про алгоритм дій]
  - Віджимання
    20 разів
  - Підтягування
    10 разів
  - Присідання 
    50 разів
  ```
  
- Трек звичок

  ```
  Час виконати [Зарядка]!
  *Розпочати(+2n XP)* *Відмовитись (-n XP)*
  - Розпочати
  
  Перший крок: віджимання
  
  10 разів
  *Виконано (+1.5n/steps)* *Відмовитись (-n XP)*
  - Виконано
  
  Другий крок: підтягування
  
  10 разів
  *Виконано (+1.5n/steps)* *Відмовитись (-n XP)*
  ```
  
- Список звичок які відслідковуються

- Статистика виконання конкретної звички

- Статистика по XP в цілому (можна навіть красивий графік малювати)

- CRUD для звичок:

  - Видалити звичку
  - Відредагувати звичку
  - продивитись звичку (має викатувати всю її структуру разом з алгоритмом одним повідомленням)
  - призупинити відслідковування (в базі відповідно буде поле is_active)

- Скільки зараз XP

---

### Ідея

Хочу написати трекер звичок у вигляді телеграм бота.
Звичка складається з алгоритму Тригер -> Алгоритм дій -> Нагорода
Має бути сутність Звичка, яка вискакує у вигляді телеграмівського сповіщення юзеру у заданий час (**Тригер**).

Це сповіщення має мати кнопку: або виконано, у випадку з простими звичками (почистити зуби); або розпочати (складні звички, наприклад зарядка) і тоді будуть вискакувати кроки, кожна з яких буде мати кнопку або виконано або відмінити (тоді вся складна звичка абортиться). Цей процес є алгоритмом звички. (**Алгоритм дій** ).

###### Note: кнопочки для легкості інтерфейсу будуть використовувати емодзі

За кожну дію надається певна кількість **XP** [питання: як їх вираховувати, чи надавати юзеру можливість це робити? за виконання складної звички має нараховуватись більше балів ніж за суму дій, які її складають; пізшіше варто також підключити телеграмівські анімації привітання, для збільшення рівня дофаміну, який буде виділятись юзером].

###### Також для кожної звички, через 254 дні бот запропонує припинити відслідковування, оскільки звичка скоріш за все вже сформувалась

Тут ще треба продумати як поводитись коли чел повністю ігнорує сповіщення.

Один з варіантів почати забирати хп



Ще можна ввести два додаткові підвиди звички:

- стримування (від алгоголю, або інших шкідливих звичок)

  Такий тип звички буде тригеритись в кінці дня з запитанням чи це + один день стримування, якщо ні, рахунок жорстко обнуляється і юзер штрафується на велику кількість xp

- Числові звички (подумати над назвою)

  Наприклад, є ціль пройти за день 10к кроків, юзер в кінці дня вводить (пізніше можлива інтеграція з API фітнес трекерів) кількість пройдених кроків, а бот розраховує кількість хп в залежності від виконання цілі (якщо більше, бот видає більше хп, якщо ціль недовиконана, то в залежності від відсотку виконання, розраховує чи штраф чи меншу нагороду)



[!] І ще кілер фіча яку треба ввести:

деякі звички можуть лінкуватись з іншими звичками, формуючи сутність **Рутина**, наприклад *ранкова рутина*, або *вечірня рутина*. Тобто це такий стек звичкок, які відбуваються приблизно в один і той самий час в одинакових умовах. Наприклад у вас може бути спеціальна рутина для суботи (помити то, потім то, з'їздити туда то, купити таке то). За виконання рутини буде нараховуватись найбільша кількість хп. 

!!! Тут важливо розрахувати ціну дії так, щоб ціна звички не девальвувала з часом, що призвело б до втрати стимулів юзером.

Ще можна додати категорії звичок, типу: спорт, здоров'я, саморозвиток і так далі.

---

### Stack

- telebot (or aiogram)
- alembic
- SQLalchemy (maybe)
- SQLite (or Posgress)
- [maybe] Flask/FastAPI  
- Marshmello - for data validations

---

### MVP Development Plan

1. Трекер звичок на простих звичках
2. Додати звички з алгоритмом
3. Додати Рутини
